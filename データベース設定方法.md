# データベース設定方法（超簡単版）

## エラー内容
`DATABASE_URL`環境変数が見つからないというエラーが出ています。

## 解決方法

### ステップ1: `.env.local`ファイルを作成

プロジェクトフォルダ（MXVA）に `.env.local` というファイルを作成してください。

**ファイルの場所**: `/Users/nctakahiroyoda/Documents/programs/MXVA/.env.local`

### ステップ2: データベース接続文字列を設定

`.env.local`ファイルに以下の内容を追加してください：

```
DATABASE_URL="postgresql://username:password@localhost:5432/mxva?schema=public"
```

**重要**: `username`、`password`、`mxva`の部分を、あなたのデータベースの設定に合わせて変更してください。

---

## データベースがない場合

もしPostgreSQLデータベースがまだない場合は、以下のいずれかの方法で作成できます：

### 方法1: ローカルにPostgreSQLをインストール（開発用）

1. **PostgreSQLをインストール**
   - Mac: `brew install postgresql@14` または https://www.postgresql.org/download/ からダウンロード
   - Windows: https://www.postgresql.org/download/windows/ からダウンロード

2. **データベースを作成**
   ```bash
   createdb mxva
   ```

3. **`.env.local`に設定**
   ```
   DATABASE_URL="postgresql://あなたのユーザー名:パスワード@localhost:5432/mxva?schema=public"
   ```

### 方法2: Supabase（無料、簡単）

1. **Supabaseにアカウント作成**
   - https://supabase.com/ にアクセス
   - 無料アカウントを作成

2. **プロジェクトを作成**
   - 「New Project」をクリック
   - プロジェクト名を入力
   - データベースパスワードを設定

3. **接続文字列を取得**
   - プロジェクトの「Settings」>「Database」
   - 「Connection string」の「URI」をコピー

4. **`.env.local`に設定**
   ```
   DATABASE_URL="[コピーした接続文字列]"
   ```

### 方法3: Vercel Postgres（Vercelを使っている場合）

1. **VercelプロジェクトでPostgresを追加**
   - Vercel Dashboard > プロジェクト > Storage > Create Database > Postgres

2. **接続文字列を取得**
   - 「.env.local」タブで接続文字列が表示されます

3. **`.env.local`に設定**
   ```
   DATABASE_URL="[表示された接続文字列]"
   ```

---

## データベースが設定できたら

1. **Prismaマイグレーションを実行**
   ```bash
   npx prisma migrate dev
   ```
   または
   ```bash
   npx prisma db push
   ```

2. **Prisma Studioを起動**
   ```bash
   npx prisma studio
   ```

3. **ユーザーを作成**
   - ブラウザで http://localhost:5555 が開きます
   - 「User」テーブルをクリック
   - 「Add record」でユーザーを追加

---

## 既にデータベースがある場合

既にPostgreSQLデータベースがある場合は、その接続情報を使って`.env.local`に設定してください。

接続文字列の形式：
```
postgresql://ユーザー名:パスワード@ホスト名:ポート番号/データベース名?schema=public
```

例：
```
DATABASE_URL="postgresql://postgres:mypassword@localhost:5432/mxva?schema=public"
```

---

## 確認方法

`.env.local`ファイルを設定した後、開発サーバーを再起動してください：

```bash
npm run dev
```

エラーが出なくなれば成功です！


